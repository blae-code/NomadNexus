# NomadNexus Backend Configuration
# Copy this file to .env and fill in your actual values for local development
# Production values should be set directly in your deployment platform's environment variables

# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================

# Your Supabase project URL
# Found at: https://app.supabase.com -> Settings -> API
SUPABASE_URL=https://your-project.supabase.co

# Supabase Service Role Key (server-side use only)
# Found at: https://app.supabase.com -> Settings -> API -> Service role
# WARNING: Keep this secret - never expose in frontend code
SUPABASE_SERVICE_KEY=your-service-role-key-here

# Optional: Project reference ID (used in some Supabase CLI commands)
# Example: "abcdefghijklmnop"
SUPABASE_PROJECT_ID=your-project-id

# ============================================================================
# LIVEKIT CONFIGURATION
# ============================================================================

# LiveKit WebSocket server URL
# Example: "wss://your-livekit-instance.com"
# For self-hosted: Use your LiveKit server's WebSocket URL
LIVEKIT_URL=wss://your-livekit-instance.com

# LiveKit API Key
# Found in your LiveKit server configuration or dashboard
LIVEKIT_API_KEY=your-livekit-api-key

# LiveKit API Secret
# Found in your LiveKit server configuration or dashboard
# Used to sign AccessTokens for LiveKit authentication
LIVEKIT_API_SECRET=your-livekit-api-secret

# LiveKit Webhook Secret
# Used to verify HMAC signatures of incoming webhooks from LiveKit
# Set the same value in LiveKit server's webhook configuration
LIVEKIT_WEBHOOK_SECRET=your-livekit-webhook-secret

# ============================================================================
# WEB PUSH NOTIFICATIONS (VAPID)
# ============================================================================

# VAPID Public Key
# Generated using: npx web-push generate-vapid-keys
# This CAN be exposed to frontend code (included in subscription)
NEXT_PUBLIC_VAPID_PUBLIC_KEY=your-vapid-public-key

# VAPID Private Key
# Generated using: npx web-push generate-vapid-keys
# WARNING: Keep this secret - never expose in frontend or client code
VAPID_PRIVATE_KEY=your-vapid-private-key

# VAPID Subject (contact information for push service)
# Format: "mailto:your-email@example.com" or "https://yourdomain.com"
VAPID_SUBJECT=mailto:admin@example.com

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================

# Frontend environment variables (exposed to browser)
# LiveKit URL for frontend (can differ from server URL if using different protocol/port)
VITE_LIVEKIT_URL=wss://your-livekit-instance.com

# Supabase URL for frontend
VITE_SUPABASE_URL=https://your-project.supabase.co

# Supabase Anon Key for frontend auth
VITE_SUPABASE_ANON_KEY=your-anon-key

# ============================================================================
# NOTES
# ============================================================================
#
# Environment Variable Precedence:
# - Supabase Edge Functions support both SUPABASE_URL and PROJECT_URL
# - Supabase Edge Functions support both SUPABASE_SERVICE_KEY and SERVICE_ROLE_KEY
# - Functions will use whichever is set
#
# For Local Development:
# 1. Copy this file to .env
# 2. Fill in values for your Supabase and LiveKit projects
# 3. Run: supabase functions serve
#
# For Production:
# 1. Set these environment variables directly in your hosting platform
#    - Vercel: Settings -> Environment Variables
#    - Netlify: Site settings -> Build & Deploy -> Environment
#    - Supabase Dashboard: Project Settings -> Functions -> Environment
# 2. DO NOT commit .env files to Git (check .gitignore)
#
# Generate VAPID Keys:
# npm install -D web-push
# npx web-push generate-vapid-keys
#
# Testing LiveKit Webhook:
# curl -X POST http://localhost:54321/functions/v1/livekit-webhook \
#   -H "Content-Type: application/json" \
#   -d '{...webhook payload...}'
#
